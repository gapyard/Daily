<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>üìñ ‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà</title>
  <style>
    body{font-family:sans-serif;background:#0f172a;color:#f1f5f9;margin:0;padding:20px}
    h1{text-align:center}
    .card{background:#1e293b;padding:15px;border-radius:10px;margin-bottom:10px}
    label{display:block;margin-top:10px}
    input,textarea,select{width:100%;padding:8px;margin-top:4px;border-radius:6px;border:none;background:#334155;color:#f1f5f9}
    button{padding:6px 12px;border:none;border-radius:6px;margin:4px;cursor:pointer}
    button.save{background:#16a34a;color:#fff}
    button.delete{background:#dc2626;color:#fff}
    button.ghost{background:transparent;color:#94a3b8;font-size:12px}
    .timeline-item{display:flex;justify-content:space-between;align-items:center;background:#1e293b;padding:10px;border-radius:8px;margin:5px 0}
    .actions button{margin-left:5px}
  </style>
</head>
<body>
  <h1>üìñ ‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà</h1>

  <div class="card">
    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <input type="date" id="date"></label>
    <label>‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå <span id="weekday"></span></label>
    <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà <input id="place" placeholder="‡πÄ‡∏ä‡πà‡∏ô The Mall, Central"></label>
    <label>‡πÇ‡∏ô‡πâ‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà <input id="place_note" placeholder="‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏•‡πà‡∏ô / ‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≠‡∏á / ‡πÄ‡∏à‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"></label>
    <label>‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£ <input id="food" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏≠‡∏ö ‡∏ä‡∏≤‡∏°‡∏°"></label>
    <label>‡πÇ‡∏ô‡πâ‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô <textarea id="notes" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏ô‡πâ‡∏ï‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î..."></textarea></label>
    <label>‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 3) <input type="file" id="images" multiple accept="image/*"></label>
    <button class="save" onclick="saveEntry()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    <button class="delete" onclick="deleteToday()">‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
  </div>

  <h3>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</h3>
  <div id="timelineList"></div>

  <script>
    const WEEK = ['‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå','‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå','‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£','‡∏û‡∏∏‡∏ò','‡∏û‡∏§‡∏´‡∏±‡∏™','‡∏®‡∏∏‡∏Å‡∏£‡πå','‡πÄ‡∏™‡∏≤‡∏£‡πå'];

    function $(id){return document.getElementById(id)}

    function readDB(){return JSON.parse(localStorage.getItem('dj_db')||'{}')}
    function writeDB(d){localStorage.setItem('dj_db',JSON.stringify(d))}

    function updateWeekday(){
      const v=$('date').value; if(!v){$('weekday').textContent='';return;}
      const d=new Date(v); $('weekday').textContent=WEEK[d.getDay()];
    }

    function saveEntry(){
      const d=readDB(); const date=$('date').value;
      if(!date){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà');return;}
      d[date]={place:$('place').value,place_note:$('place_note').value,food:$('food').value,notes:$('notes').value};
      writeDB(d); renderTimeline(); clearForm();
    }

    function clearForm(){
      $('place').value=''; $('place_note').value=''; $('food').value=''; $('notes').value='';
      $('images').value='';
    }

    function deleteToday(){
      const date=$('date').value; if(!date)return;
      const d=readDB(); if(d[date]){delete d[date]; writeDB(d); renderTimeline();}
    }

    function renderTimeline(){
      const list=$('timelineList'); list.innerHTML='';
      const d=readDB(); 
      const arr=Object.entries(d).map(([date,e])=>({date,...e})).sort((a,b)=>b.date.localeCompare(a.date));
      if(!arr.length){list.innerHTML='<div style="color:#94a3b8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</div>';return;}

      arr.forEach(it=>{
        const row=document.createElement('div'); row.className='timeline-item';

        const dObj=new Date(it.date);
        const header=document.createElement('div');
        header.style.fontWeight='600';
        header.textContent=`${it.date}   ${WEEK[dObj.getDay()]}`;

        const detail=document.createElement('div');
        detail.style.fontSize='14px';
        detail.textContent=[
          it.place?`üìç ${it.place}`:'',
          it.place_note?`üìù ${it.place_note}`:'',
          it.food?`üçö ${it.food}`:'',
          it.notes?`üóí ${it.notes}`:''
        ].filter(Boolean).join('   ');

        const left=document.createElement('div'); left.style.flex='1';
        left.appendChild(header); if(detail.textContent)left.appendChild(detail);

        const act=document.createElement('div'); act.className='actions';
        const edit=document.createElement('button'); edit.className='ghost'; edit.textContent='‡πÅ‡∏Å‡πâ';
        edit.onclick=()=>{$('date').value=it.date;updateWeekday();$('place').value=it.place||'';$('place_note').value=it.place_note||'';$('food').value=it.food||'';$('notes').value=it.notes||'';scrollTo({top:0,behavior:'smooth'});}
        const del=document.createElement('button'); del.className='ghost'; del.textContent='‡∏•‡∏ö';
        del.onclick=()=>{const d2=readDB(); if(confirm(`‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${it.date}?`)){delete d2[it.date];writeDB(d2);renderTimeline();}};
        act.appendChild(edit); act.appendChild(del);

        row.appendChild(left); row.appendChild(act);
        list.appendChild(row);
      });
    }

    document.addEventListener('DOMContentLoaded',()=>{const today=new Date().toISOString().slice(0,10);$('date').value=today;updateWeekday();renderTimeline();$('date').addEventListener('change',updateWeekday);});
  </script>
</body>
</html>
